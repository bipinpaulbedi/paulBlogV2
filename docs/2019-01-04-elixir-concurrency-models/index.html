<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'EB Garamond','Georgia','Palatino','Helvetica';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:#333;font-family:'EB Garamond','Georgia','Palatino','Helvetica';font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";margin:auto;max-width:700px;width:99%;text-align:center;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Lora','Georgia','Palatino','Helvetica';font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Lora','Georgia','Palatino','Helvetica';font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Lora','Georgia','Palatino','Helvetica';font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Lora','Georgia','Palatino','Helvetica';font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Lora','Georgia','Palatino','Helvetica';font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Lora','Georgia','Palatino','Helvetica';font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:#bbb;font-style:italic;border-left:0.32813rem solid #bbb;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;opacity:0.4;margin:2em;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;color:#36393D;background-color:#EEEEEE;padding:0.5em 0.5em;display:block;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:#333;font-weight:400;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{color:#bbb;text-decoration:none;}a:hover,a:active{color:#ff5252;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}</style><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=460eb463f19f692d252e644ff5318f08"/><meta data-react-helmet="true" name="description" content="learning adventures"/><meta data-react-helmet="true" property="og:title" content="phoenix/elixir - concurrency actor model with &#x27;let it crash&#x27; philosophy"/><meta data-react-helmet="true" property="og:description" content="learning adventures"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="bipin paul bedi"/><meta data-react-helmet="true" name="twitter:title" content="phoenix/elixir - concurrency actor model with &#x27;let it crash&#x27; philosophy"/><meta data-react-helmet="true" name="twitter:description" content="learning adventures"/><meta data-react-helmet="true" name="keywords" content="elixir, phoenix, actor-model, design-patterns, functional-programming, technology"/><style data-styled="gySJgo MPrOL ZUKKG fOcFMj elzGuo jBREV jKvHOE fYJCPj eXCGvP" data-styled-version="4.3.1">
/* sc-component-id: socialLinks__SocialLink-sc-1jtytct-0 */
.ZUKKG{font-size:1.5em;word-spacing:.4em;}
/* sc-component-id: menu__TopMenu-ldryeq-0 */
.fOcFMj{text-transform:uppercase;} .fOcFMj a{margin:1em;color:#333;font-family:"Lora","Georgia","Palatino","Helvetica";font-size:.9em;} .fOcFMj a:hover{color:#ff5252;}
/* sc-component-id: header__HeaderBlock-sc-31ozxh-0 */
.MPrOL{font-size:1.5em;text-transform:uppercase;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .MPrOL div{margin-bottom:0;} .MPrOL div a p{font-size:0.5em;color:#bbb;}
/* sc-component-id: layout__Main-ii2kc2-0 */
.gySJgo{margin:auto;max-width:700px;width:90%;text-align:center;}
/* sc-component-id: blogPostTemplate__Post-ts63lh-0 */
.eXCGvP{text-align:left;}
/* sc-component-id: blogPostTemplate__TitleDisplay-ts63lh-1 */
.elzGuo{margin-top:0;}
/* sc-component-id: blogPostTemplate__SubTitleDisplay-ts63lh-2 */
.jBREV{font-size:1em;margin:0;}
/* sc-component-id: blogPostTemplate__DateDisplay-ts63lh-3 */
.jKvHOE{font-size:0.8em;text-align:left;color:#ff5252;line-height:1.5em;}
/* sc-component-id: blogPostTemplate__Seperator-ts63lh-4 */
.fYJCPj{color:#bbb;}</style><link rel="shortcut icon" href="/icons/icon-48x48.png?v=460eb463f19f692d252e644ff5318f08"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#ffffff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=460eb463f19f692d252e644ff5318f08"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=460eb463f19f692d252e644ff5318f08"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=460eb463f19f692d252e644ff5318f08"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=460eb463f19f692d252e644ff5318f08"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=460eb463f19f692d252e644ff5318f08"/><title data-react-helmet="true">phoenix/elixir - concurrency actor model with &#x27;let it crash&#x27; philosophy | paul blog</title><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=460eb463f19f692d252e644ff5318f08"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=460eb463f19f692d252e644ff5318f08"/><meta name="generator" content="Gatsby 2.4.2"/><link href="//fonts.googleapis.com/css?family=Lora:900,400,700|EB+Garamond:900,400,700" rel="stylesheet" type="text/css"/><link rel="alternate" type="application/rss+xml" title="Paul Blog&#x27;s RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/component---src-templates-blog-post-template-js-22ce77a2a57a2701e459.js"/><link as="script" rel="preload" href="/app-a0992a19372005af7731.js"/><link as="script" rel="preload" href="/12-3b20beacbf0e7c85c0c6.js"/><link as="script" rel="preload" href="/1-345fd3251c82b98d51f9.js"/><link as="script" rel="preload" href="/0-5eca45484f047124b48e.js"/><link as="script" rel="preload" href="/webpack-runtime-1f5eb89e9c9d2758538c.js"/><link as="fetch" rel="preload" href="/static/d/435/path---2019-01-04-elixir-concurrency-models-48-f-c33-X8cIXGNvacIE5Wv9DTvVokpsT4.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="layout__Main-ii2kc2-0 gySJgo"><h1 class="header__HeaderBlock-sc-31ozxh-0 MPrOL"><div><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:32px;height:32px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACW0lEQVQ4y41UvUt6YRT2n2ho0lL8yA8Uo1BpETTEQXQSHZxCUPsDghYXcXASbKkgBCcHhdRFxZaGIARBsBZNUXAIiWgIv554D1y56r3+fgde7uW8533OOc/5kEBElsvl6iwWC8xms9VhOr4NXyRiYNyXgf3LZiegENhoNMLNzQ2urq6QTqcxHo9JL+RMIuZxPp/Tt9FowG63QyaTYX9/H1KpFIFAAN/f34KggoDT6ZT+n5+fcXx8jIODA1xcXKBYLMLpdEIul6PZbK45FkyZz8fX1xdcLhcUCgXC4TDphsMhTk9PycnHx8fuCLmL29tbZDIZxONxqFQq2Gw21Ot1VCoVWK1W0mWz2dUb0aJwgG9vbwgGg1Cr1TCbzQTocDjoy4ry+voqmJEgh6zHmNzd3UGpVMJisaBUKqHf76+lxo9MNELuglXP5/MRYCgUWuOUK4IYmGDKrVYLRqORuEqlUqR7eHjA2dkZVZ2z5c7mxKwAufLncjkYDAYcHh7i8fERn5+fODk5of6LRqNkw7XVzpQ5wGQyCZ1ORxHWajXSRSIRosDj8WAymZDu/f0dvV5vi9MtwOvra2i1Wmg0GlSrVdK1223o9XqYTCa8vLyQjk0Pay8m/IWxBZhIJOgxi5Bxx6TT6RCvrJUY0Pn5Odkwvjebe6sojPijoyOK0u12I5/PIxaL0fixGb68vITX6yV++e+2IuRX6v7+nhqZgezt7VGB/H4/BoMB3f/+/m7tTNFZ5i673S7K5TIKhQKenp7w8/OzFolYcwtum80NsjkhfMc7F+zmcv3ftc+XP/B5bUA3Y0/ZAAAAAElFTkSuQmCC" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><img width="32" height="32" srcset="/static/b52c9b1a7263cd726c180004934576e6/0823c/favicon-32x32.png 1x" src="/static/b52c9b1a7263cd726c180004934576e6/0823c/favicon-32x32.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div><a href="/">paul blog<p>learning adventures</p></a></div></h1><div class="socialLinks__SocialLink-sc-1jtytct-0 ZUKKG"><a href="https://www.facebook.com/bipinpaulbedi" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg> </a><a href="https://twitter.com/bipinpaulbedi" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg></a><a href="https://www.instagram.com/bipinpaulbedi/" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></a><a href="https://github.com/bipinpaulbedi" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path></svg></a><a href="https://www.linkedin.com/in/bipinpaulbedi/" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a href="https://www.youtube.com/channel/UCgr_5XPAWL1M4nqVghy2X8A" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a><a href="https://www.kaggle.com/bipinpaulbedi" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 320 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M304.2 501.5L158.4 320.3 298.2 185c2.6-2.7 1.7-10.5-5.3-10.5h-69.2c-3.5 0-7 1.8-10.5 5.3L80.9 313.5V7.5q0-7.5-7.5-7.5H21.5Q14 0 14 7.5v497q0 7.5 7.5 7.5h51.9q7.5 0 7.5-7.5v-109l30.8-29.3 110.5 140.6c3 3.5 6.5 5.3 10.5 5.3h66.9q5.25 0 6-3z"></path></svg></a><a href="https://hub.docker.com/u/bipinpaulbedi" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"></path></svg></a><a href="https://stackoverflow.com/users/10877364/bipin-paul-bedi" target="_blank" rel="noopener noreferrer"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg></a><a href="/404/"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M192 384h192c53 0 96-43 96-96h32c70.6 0 128-57.4 128-128S582.6 32 512 32H120c-13.3 0-24 10.7-24 24v232c0 53 43 96 96 96zM512 96c35.3 0 64 28.7 64 64s-28.7 64-64 64h-32V96h32zm47.7 384H48.3c-47.6 0-61-64-36-64h583.3c25 0 11.8 64-35.9 64z"></path></svg></a><a href="/404/"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M186.3 258.2c0 12.2-9.7 21.5-22 21.5-9.2 0-16-5.2-16-15 0-12.2 9.5-22 21.7-22 9.3 0 16.3 5.7 16.3 15.5zM80.5 209.7h-4.7c-1.5 0-3 1-3.2 2.7l-4.3 26.7 8.2-.3c11 0 19.5-1.5 21.5-14.2 2.3-13.4-6.2-14.9-17.5-14.9zm284 0H360c-1.8 0-3 1-3.2 2.7l-4.2 26.7 8-.3c13 0 22-3 22-18-.1-10.6-9.6-11.1-18.1-11.1zM576 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48zM128.3 215.4c0-21-16.2-28-34.7-28h-40c-2.5 0-5 2-5.2 4.7L32 294.2c-.3 2 1.2 4 3.2 4h19c2.7 0 5.2-2.9 5.5-5.7l4.5-26.6c1-7.2 13.2-4.7 18-4.7 28.6 0 46.1-17 46.1-45.8zm84.2 8.8h-19c-3.8 0-4 5.5-4.2 8.2-5.8-8.5-14.2-10-23.7-10-24.5 0-43.2 21.5-43.2 45.2 0 19.5 12.2 32.2 31.7 32.2 9 0 20.2-4.9 26.5-11.9-.5 1.5-1 4.7-1 6.2 0 2.3 1 4 3.2 4H200c2.7 0 5-2.9 5.5-5.7l10.2-64.3c.3-1.9-1.2-3.9-3.2-3.9zm40.5 97.9l63.7-92.6c.5-.5.5-1 .5-1.7 0-1.7-1.5-3.5-3.2-3.5h-19.2c-1.7 0-3.5 1-4.5 2.5l-26.5 39-11-37.5c-.8-2.2-3-4-5.5-4h-18.7c-1.7 0-3.2 1.8-3.2 3.5 0 1.2 19.5 56.8 21.2 62.1-2.7 3.8-20.5 28.6-20.5 31.6 0 1.8 1.5 3.2 3.2 3.2h19.2c1.8-.1 3.5-1.1 4.5-2.6zm159.3-106.7c0-21-16.2-28-34.7-28h-39.7c-2.7 0-5.2 2-5.5 4.7l-16.2 102c-.2 2 1.3 4 3.2 4h20.5c2 0 3.5-1.5 4-3.2l4.5-29c1-7.2 13.2-4.7 18-4.7 28.4 0 45.9-17 45.9-45.8zm84.2 8.8h-19c-3.8 0-4 5.5-4.3 8.2-5.5-8.5-14-10-23.7-10-24.5 0-43.2 21.5-43.2 45.2 0 19.5 12.2 32.2 31.7 32.2 9.3 0 20.5-4.9 26.5-11.9-.3 1.5-1 4.7-1 6.2 0 2.3 1 4 3.2 4H484c2.7 0 5-2.9 5.5-5.7l10.2-64.3c.3-1.9-1.2-3.9-3.2-3.9zm47.5-33.3c0-2-1.5-3.5-3.2-3.5h-18.5c-1.5 0-3 1.2-3.2 2.7l-16.2 104-.3.5c0 1.8 1.5 3.5 3.5 3.5h16.5c2.5 0 5-2.9 5.2-5.7L544 191.2v-.3zm-90 51.8c-12.2 0-21.7 9.7-21.7 22 0 9.7 7 15 16.2 15 12 0 21.7-9.2 21.7-21.5.1-9.8-6.9-15.5-16.2-15.5z"></path></svg></a><a href="/404/"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M492.4 220.8c-8.9 0-18.7 6.7-18.7 22.7h36.7c0-16-9.3-22.7-18-22.7zM375 223.4c-8.2 0-13.3 2.9-17 7l.2 52.8c3.5 3.7 8.5 6.7 16.8 6.7 13.1 0 21.9-14.3 21.9-33.4 0-18.6-9-33.2-21.9-33.1zM528 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM122.2 281.1c0 25.6-20.3 40.1-49.9 40.3-12.2 0-25.6-2.4-38.8-8.1v-33.9c12 6.4 27.1 11.3 38.9 11.3 7.9 0 13.6-2.1 13.6-8.7 0-17-54-10.6-54-49.9 0-25.2 19.2-40.2 48-40.2 11.8 0 23.5 1.8 35.3 6.5v33.4c-10.8-5.8-24.5-9.1-35.3-9.1-7.5 0-12.1 2.2-12.1 7.7 0 16 54.3 8.4 54.3 50.7zm68.8-56.6h-27V275c0 20.9 22.5 14.4 27 12.6v28.9c-4.7 2.6-13.3 4.7-24.9 4.7-21.1 0-36.9-15.5-36.9-36.5l.2-113.9 34.7-7.4v30.8H191zm74 2.4c-4.5-1.5-18.7-3.6-27.1 7.4v84.4h-35.5V194.2h30.7l2.2 10.5c8.3-15.3 24.9-12.2 29.6-10.5h.1zm44.1 91.8h-35.7V194.2h35.7zm0-142.9l-35.7 7.6v-28.9l35.7-7.6zm74.1 145.5c-12.4 0-20-5.3-25.1-9l-.1 40.2-35.5 7.5V194.2h31.3l1.8 8.8c4.9-4.5 13.9-11.1 27.8-11.1 24.9 0 48.4 22.5 48.4 63.8 0 45.1-23.2 65.5-48.6 65.6zm160.4-51.5h-69.5c1.6 16.6 13.8 21.5 27.6 21.5 14.1 0 25.2-3 34.9-7.9V312c-9.7 5.3-22.4 9.2-39.4 9.2-34.6 0-58.8-21.7-58.8-64.5 0-36.2 20.5-64.9 54.3-64.9 33.7 0 51.3 28.7 51.3 65.1 0 3.5-.3 10.9-.4 12.9z"></path></svg></a><a href="/rss.xml"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM112 416c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm157.533 0h-34.335c-6.011 0-11.051-4.636-11.442-10.634-5.214-80.05-69.243-143.92-149.123-149.123-5.997-.39-10.633-5.431-10.633-11.441v-34.335c0-6.535 5.468-11.777 11.994-11.425 110.546 5.974 198.997 94.536 204.964 204.964.352 6.526-4.89 11.994-11.425 11.994zm103.027 0h-34.334c-6.161 0-11.175-4.882-11.427-11.038-5.598-136.535-115.204-246.161-251.76-251.76C68.882 152.949 64 147.935 64 141.774V107.44c0-6.454 5.338-11.664 11.787-11.432 167.83 6.025 302.21 141.191 308.205 308.205.232 6.449-4.978 11.787-11.432 11.787z"></path></svg></a></div><div class="menu__TopMenu-ldryeq-0 fOcFMj"><a href="/">Home</a><a href="/tagcloud/">Tags</a><a href="/about">About</a></div><hr/><h1 class="blogPostTemplate__TitleDisplay-ts63lh-1 elzGuo"><a href="2019-01-04-elixir-concurrency-models">phoenix/elixir - concurrency actor model with &#x27;let it crash&#x27; philosophy</a></h1><h2 class="blogPostTemplate__SubTitleDisplay-ts63lh-2 jBREV">concurrent and/or parallel processing model</h2><h3 class="blogPostTemplate__DateDisplay-ts63lh-3 jKvHOE">6 months ago<!-- --> <span class="blogPostTemplate__Seperator-ts63lh-4 fYJCPj">|</span> <!-- -->8<!-- --> min read<!-- --> <span class="blogPostTemplate__Seperator-ts63lh-4 fYJCPj">|</span> <a href="/tagCloud/technology">#technology</a> <a href="/tagCloud/elixir">#elixir</a> <a href="/tagCloud/phoenix">#phoenix</a> <a href="/tagCloud/actor-model">#actor-model</a> <a href="/tagCloud/design-patterns">#design-patterns</a> <a href="/tagCloud/functional-programming">#functional-programming</a> <a href="/tagCloud/technology">#technology</a> </h3><div class="blogPostTemplate__Post-ts63lh-0 eXCGvP"><p>A concurrent program has multiple logical threads of control. These threads may or may not run in parallel. A parallel program potentially runs more quickly than a sequential program by executing different parts of the computation simultaneously (in parallel). It may or may not have more than one logical thread of control. An alternative way of thinking about this is that concurrency is an aspect of the problem domainâ€”your program needs to handle multiple simultaneous (or near-simultaneous) events. Parallelism, by contrast, is an aspect of the solution domainâ€”you want to make your program faster by processing different portions of the problem in parallel.</p>
<p>Functional programming avoids the problems associated with a shared mutable state by avoiding mutable state. Actor programming, by contrast, retains mutable state but avoids sharing it. An actor is like an object in an object-oriented (OO) programâ€”it encapsulates state and communicates with other actors by exchanging messages. The difference is that actors run concurrently with each other and, unlike OO-style message passing (which is really just calling a method), actors really communicate by sending messages to each other.</p>
<p>Certainly, there are some concurrent programs that will always be non-deterministic. And this is unavoidableâ€”some problems require solutions that are intrinsically dependent on the details of timing. But itâ€™s not the case that all parallel programs are necessarily non-deterministic. The value of the sum of the numbers between 0 and 10,000 wonâ€™t change just because we add those numbers together in parallel instead of sequentially</p>
<p>Microsoft <a href="https://dotnet.github.io/orleans/">Orleans</a> is .net implementation of Actor Model but we will focus on programming language which was built with a focus on concurrent execution. Elixir/Erlang: Erlang is a programming language used to build massively scalable soft real-time systems with requirements on high availability. Some of its uses are in telecoms, banking, e-commerce, computer telephony and instant messaging. Erlang's runtime system has built-in support for concurrency, distribution and fault tolerance.
OTP is a set of Erlang libraries and design principles providing middle-ware to develop these systems. It includes its own distributed database, applications to interface towards other languages, debugging and release handling tools. Erlang runs on VM called BEAM which is essentially a <a href="https://en.wikipedia.org/wiki/Virtual_machine">process virtual machine</a></p>
<blockquote>
<p>In Erlang, and therefore Elixir, an actor is called a process. In most environments, a process is a heavyweight entity that consumes lots of resources and is expensive to create. An Elixir process, by contrast, is very lightweightâ€”lighter weight even than most systemsâ€™ threads, both in terms of resource consumption and startup cost. Elixir programs typically create thousands of processes without problems and donâ€™t normally need to resort to the equivalent of thread pools</p>
</blockquote>
<p><strong>Elixir actor by example</strong></p>
<p>Elixir actors communicate via message passing using mailboxes, which are queues by data structure. For our example, we will create a md5 hash generator which based on a string return a md5 value of a string. If the value is already exiting it will not recompute to save CPU resource but send it from in-memory cache.</p>
<pre><code>defmodule HashIt do
  def loop do
    receive do
      {:compute, value} -> IO.puts("#{value}")
    end
    loop
  end
end
</code></pre>
<pre><code>pid = spawn(&#x26;HashIt.loop/0)
send(pid, {:compute, "bipin"})
sleep(1000)
</code></pre>
<p>This function implements an infinite loop by calling itself recursively. The receive block waits for a message and then uses pattern matching to work out how to handle it. Elixir implements tail-call elimination. Tail-call elimination, as its name suggests, replaces a recursive call with a simple jump if the last thing the function does is call itself, thus infinite recursive call o loop function will not result in stack overflow.</p>
<pre><code>defmodule HashIt do
  def loop do
    receive do
      {:compute, value} -> IO.puts(:crypto.hash(:md5, value) |> Base.encode16())
      {:shutdown} -> -> exit(:normal)
    end
    loop
  end
end
</code></pre>
<pre><code>receive do
  {:EXIT, ^pid, reason} -> IO.puts("HasIt has exited (#{reason})")
end
</code></pre>
<pre><code>Process.flag(:trap_exit, true)
pid = spawn_link(&#x26;HashIt.loop/0)
send(pid, {:compute, "bipin"})
send(pid, {:shutdown}
</code></pre>
<p><strong>Adding state to the actor</strong></p>
<p>We will add a variable to store all values sent and their computed hash</p>
<pre><code>defmodule HashIt do
  def loop(strg) do
    receive do
      {:compute, value} ->
        hashValue = :crypto.hash(:md5 , value) |> Base.encode16()
        updatedStrg = strg.put(strg, value, hashValue)
        IO.puts(hashValue)
        loop(updatedStrg)
    end
    loop
  end
end
</code></pre>
<p>Here Strg is an elixir Map and we can start the process by using</p>
<p><code>pid = spawn(HashIt, :loop, [%{}])</code></p>
<p>or we can define methods to start, compute also provide it a name instead of using pid by registering it.</p>
<pre><code>defmodule HashIt do
  def start(name, strg, cryptoType) do
    pid = spawn(__MODULE__, :loop, [strg, cryptoType])
    Process.register(pid, name)
    pid
  end
  def compute(name, value) do
    ref = make_ref()
    send(name, {:compute, value, self(), ref})
    receive do
      {:ok, ^ref, reply} -> reply
    end
  end
  def loop(strg, cryptoType) do
    receive do
      {:compute, value, sender, ref} ->
        hashValue = :crypto.hash(cryptoType , value) |> Base.encode16()
        updatedStrg = Map.put_new(strg, value, hashValue)
        send(sender, {:ok, ref, hashValue})
        loop(updatedStrg, cryptoType)
    end
    loop
  end
end
</code></pre>
<p>The program can be started via start method and uses pseudo-variable <strong>MODULE</strong>, which evaluates to the name of the current module. The Process.register registers the pid as name :hashit. Moreover, instead of printing the hash value it now returns it to the sender, which helps in bi-directional communication. The carot ^ symbol in {:ok, ^ref, reply} denotes we want to match the value rather than binding it. The <a href="https://elixir-lang.org/getting-started/pattern-matching.html">pattern matching</a> in elixir is used to match inside a data structure. Effectively we can now execute the HashIt module via</p>
<pre><code>:hashItMD5 |> HashIt.start([%{}, :md5])
:hashItMD5 |> HashIt.compute("bipin")
</code></pre>
<p><strong>Adding check and compute logic</strong></p>
<p>Adding the return value to check in the cache before recomputing above module can be refactored as</p>
<pre><code>defmodule HashIt do
  def start(name, strg, cryptoType) do
    pid = spawn(__MODULE__, :loop, [strg, cryptoType])
    Process.register(pid, name)
    pid
  end
  def compute(name, value) do
    ref = make_ref()
    send(name, {:compute, value, self(), ref})
    receive do
      {:ok, ^ref, reply} -> reply
    end
  end
  def loop(strg, cryptoType) do
    receive do
      {:compute, value, sender, ref} ->
        result = Map.fetch(strg, value)
        case result do
          {:ok, val} -> send(sender, {:ok, ref, val})
            loop(strg, cryptoType)
          {:error, _reason} ->
            hashValue = :crypto.hash(cryptoType , value) |> Base.encode16()
            updatedStrg = Map.put_new(strg, value, hashValue)
            send(sender, {:ok, ref, hashValue})
            loop(updatedStrg, cryptoType)
        end
    end
    loop
  end
end
</code></pre>
<p><strong>Making it fault tolerant</strong></p>
<p>Thus various processes can be started in parallel for different crypto compute example MD5, SHA128, SHA256. Using the above process mechanism we can create multiple processes for different or same task resulting in both concurrent and parallel deterministic outputs. But this architecture does not provide fault tolerance. What if there is an error and it is aborted abruptly? Elixir provides a mechanism to link it to a process which is bi-directional.</p>
<pre><code>:hashItMD5 |> HashIt.start([%{}, :md5])
:hashItSHA256 |> HashIt.start([%{}, :sha256])
:hashItMD5 |> Process.link(:hashItSHA256)
:hashItMD5 |> exit(:forced_kill)
</code></pre>
<p>Since we are using spawn in our hash, We can also use spawn_link method to link process instead of process.link(). Please note links created are bi directional. and calling abnormal exit on :hashItMD5 will also set :hashItSHA256 to nil</p>
<p><code>Process.info(:hashItMD5, :status)</code>
<small>nil</small>
<code>Process.info(:hashItSHA256, :status)</code>
<small>nil</small></p>
<p>but normal exit will keep the linked process active, viz:
<code>:hashItMD5 |> exit(:normal)</code>
<code>Process.info(:hashItMD5, :status)</code>
<small>nil</small>
<code>Process.info(:hashItSHA256, :status)</code>
<small>{:status, :waiting}</small></p>
<p>This implies we can set the system trap to capture other processes exit, when can be utilized to create supervisor and restart the system if the process crashes. We can set Process.flag(:trap_exit, true) to capture the exit of linked process and take appropriate action. In our example of HashIt, a supervisor can be created as:</p>
<pre><code>defmodule HashItSupervisor do
  def start do
    spawn(__MODULE__, :loop_system,[])
  end
  def loop_system do
    Process.flag(:trap_exit, true)
    loop
  end
  def loop do
    pid = HashIt.start(%{}, :md5)
    // instead of using spawn please change it to spawn_link in HashIt module
    receive do
      {:EXIT, ^pid, :normal} -> IO.puts("Hash It exited normally")
        :ok
      {:EXIT, ^pid, reason} ->
        IO.puts("Hash It failed with reason #{inspect reason}...restarting")
        loop`
    end
  end
end
</code></pre>
<pre><code>HashItSupervisor.start
</code></pre>
<p>If the HashIt system now crashes it is captured by HashItSupervisor and is restarted. If the two processes are dependent on each other and can result in deadlock or infinite waiting because of crashing of sender the receiver can be guarded using timeout clause in receive do loop by using after clause. example:</p>
<pre><code>receive do
  {:ok, ^ref, value} -> IO.puts(value)
  after 1000 -> nil
end
</code></pre>
<p><strong>Scaling to multiple nodes/computers</strong></p>
<p>The actor programming naturally supports an approach to writing fault-tolerant code that leverages this observation: the error-kernel pattern. In the elixir system, the kernel is the root supervisor which can start other supervisors or workers. When we create an elixir virtual machine we create a node we can create nodes multiple nodes on the same system or on network of computer by naming them using --name or --sname option. To make multiple nodes part of the same cluster it must use same --cookie name argument. This results in running your system across multiple systems. To multiple connect nodes we can use connect function</p>
<p><code>iex(node1@192.168.0.10)1> Node.self</code>
<small>:"node1@192.168.0.10"</small>
<code>iex(node1@192.168.0.10)2> Node.list</code>
<small>[]</small>
<code>iex(node1@192.168.0.10)3> Node.connect(:"node2@192.168.0.20")</code>
<small>true</small>
<code>iex(node1@192.168.0.10)4> Node.list</code>
<small>[:"node2@192.168.0.20"]</small></p>
<p>Now use Node.Spwan to start worker or supervisors and use :global.register_name() instead of Process.register() to make names cluster global.</p>
<p><strong>Important notes</strong></p>
<p>For this explanatory purpose, we used dynamic atom naming above. However, naming dynamic processes with atoms is a terrible idea! If we use atoms, we would need to convert the name (often received from an external client) to atoms, and we should never convert user input to atoms. This is because atoms are not garbage collected. Once an atom is created, it is never reclaimed. Generating atoms from user input would mean the user can inject enough different names to exhaust our system memory!</p>
<p>In practice, it is more likely you will reach the Erlang VM limit for the maximum number of atoms before you run out of memory, which will bring your system down regardless. Moreover, supervisor model used above can result in inconsistent naming convention across various modules and libraries. Thus elixir provides a standard protocol for defining, starting and maintaining workers using efficient bucketed methodology using <a href="https://elixir-lang.org/getting-started/mix-otp/genserver.html">GenServer</a>, providing standard call, cast and info method implementation for various operation.</p></div><div id="disqus_thread"></div><hr/><footer>Â© <!-- -->2019<!-- -->, <!-- -->bipin paul bedi<!-- --> <!-- -->All rights reserved.</footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-template-js","jsonName":"2019-01-04-elixir-concurrency-models-48f","path":"/2019-01-04-elixir-concurrency-models"};window.dataPath="435/path---2019-01-04-elixir-concurrency-models-48-f-c33-X8cIXGNvacIE5Wv9DTvVokpsT4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a0992a19372005af7731.js"],"component---src-templates-blog-post-template-js":["/component---src-templates-blog-post-template-js-22ce77a2a57a2701e459.js"],"component---src-templates-tag-cloud-list-js":["/component---src-templates-tag-cloud-list-js-35271f55434101e36761.js"],"component---src-pages-404-js":["/component---src-pages-404-js-976f9573fdc1861b016f.js"],"component---src-pages-about-js":["/component---src-pages-about-js-ac86395a5f5030b0e5fa.js"],"component---src-pages-index-js":["/component---src-pages-index-js-35dde38c99bb555d63ee.js"],"component---src-pages-tagcloud-js":["/component---src-pages-tagcloud-js-f89ef38e992e810ae51b.js"],"pages-manifest":["/pages-manifest-c0039f71ca6f18fce87e.js"]};/*]]>*/</script><script src="/webpack-runtime-1f5eb89e9c9d2758538c.js" async=""></script><script src="/0-5eca45484f047124b48e.js" async=""></script><script src="/1-345fd3251c82b98d51f9.js" async=""></script><script src="/12-3b20beacbf0e7c85c0c6.js" async=""></script><script src="/app-a0992a19372005af7731.js" async=""></script><script src="/component---src-templates-blog-post-template-js-22ce77a2a57a2701e459.js" async=""></script></body></html>